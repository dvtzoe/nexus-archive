---
import Layout from "@/layouts/Layout.astro";

const getEntryPoints = async () => {
  let entryPoints: string[];
  try {
    const response = await fetch(
      `https://nexus-repo.mooo.com/api/entry-points`,
    );
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    entryPoints = await response.json();
  } catch (error) {
    console.error("Error fetching entry points:", error);
    entryPoints = [];
  }
  return entryPoints;
};
---

<Layout>
  {
    getEntryPoints().then((entryPoints) => (
      <div>
        {entryPoints.length === 0 ? (
          <p>No entry points available.</p>
        ) : (
          entryPoints.map((node) => <a href={"/node?node=" + node}>{node}</a>)
        )}
      </div>
    ))
  }
</Layout>
